extends ../../layouts/default.pug
include ../../mixins/alert.pug

block main
  +alertSuccess(5000)
  h1 Ph√¢n quy·ªÅn 

  if(records)
    form#form-change-permissions(
      method='POST',
      action=`${prefixAdmin}/roles/permissions?_method=PATCH`
    )
      input(type="hidden", name="permissions")
      .text-right 
        button.btn.btn-primary.mb-3(type="submit", button-submit) C·∫≠p nh·∫≠t

      table.table.table-hover.table-sm(table-permission)
        thead 
          tr
            th T√≠nh nƒÉng 
            each item in records
              th.text-center #{item.title}  

        tbody
          // üÜî ID d√≤ng - gi·ªØ th·ª© t·ª± role
          tr(data-name="id", class="d-none")
            td 
            each item in records   
              td.text-center 
                input(type="text", value=item.id)

          // üóÇÔ∏è Danh m·ª•c s·∫£n ph·∫©m
          tr
            td(colspan="4") 
              b Danh m·ª•c s·∫£n ph·∫©m
          tr(data-name="products-category_view")
            td Xem
            each item in records   
              td.text-center 
                input(
                  type="checkbox",
                  checked=item.permissions.includes("products-category_view"))
          tr(data-name="products-category_create")
            td Th√™m m·ªõi
            each item in records  
              td.text-center 
                input(
                  type="checkbox",
                  checked=item.permissions.includes("products-category_create"))
          tr(data-name="products-category_edit")
            td Ch·ªânh s·ª≠a
            each item in records
              td.text-center 
                input(
                  type="checkbox",
                  checked=item.permissions.includes("products-category_edit"))
          tr(data-name="products-category_delete")
            td X√≥a
            each item in records
              td.text-center 
                input(
                  type="checkbox",
                  checked=item.permissions.includes("products-category_delete"))

          // üì¶ Danh s√°ch S·∫£n ph·∫©m
          tr
            td(colspan="4") 
              b S·∫£n ph·∫©m
          tr(data-name="products_view")
            td Xem
            each item in records   
              td.text-center 
                input(
                  type="checkbox",
                  checked=item.permissions.includes("products_view"))
          tr(data-name="products_create")
            td Th√™m m·ªõi
            each item in records  
              td.text-center 
                input(
                  type="checkbox",
                  checked=item.permissions.includes("products_create"))
          tr(data-name="products_edit")
            td Ch·ªânh s·ª≠a
            each item in records
              td.text-center 
                input(
                  type="checkbox",
                  checked=item.permissions.includes("products_edit"))
          tr(data-name="products_delete")
            td X√≥a
            each item in records
              td.text-center 
                input(
                  type="checkbox",
                  checked=item.permissions.includes("products_delete"))

          // üßë‚Äçü§ù‚Äçüßë Nh√≥m quy·ªÅn
          tr
            td(colspan="4") 
              b Nh√≥m quy·ªÅn
          tr(data-name="roles_view")
            td Xem
            each item in records   
              td.text-center 
                input(
                  type="checkbox",
                  checked=item.permissions.includes("roles_view"))
          tr(data-name="roles_create")
            td Th√™m m·ªõi
            each item in records  
              td.text-center 
                input(
                  type="checkbox",
                  checked=item.permissions.includes("roles_create"))
          tr(data-name="roles_edit")
            td Ch·ªânh s·ª≠a
            each item in records
              td.text-center 
                input(
                  type="checkbox",
                  checked=item.permissions.includes("roles_edit"))
          tr(data-name="roles_delete")
            td X√≥a
            each item in records
              td.text-center 
                input(
                  type="checkbox",
                  checked=item.permissions.includes("roles_delete"))

          // üõ°Ô∏è Ph√¢n quy·ªÅn
          tr
            td(colspan="4") 
              b Ph√¢n quy·ªÅn
          tr(data-name="roles-permissions_view")
            td Xem
            each item in records   
              td.text-center 
                input(
                  type="checkbox",
                  checked=item.permissions.includes("roles-permissions_view"))
          tr(data-name="roles-permissions_create")
            td Th√™m m·ªõi
            each item in records  
              td.text-center 
                input(
                  type="checkbox",
                  checked=item.permissions.includes("roles-permissions_create"))
          tr(data-name="roles-permissions_edit")
            td Ch·ªânh s·ª≠a
            each item in records
              td.text-center 
                input(
                  type="checkbox",
                  checked=item.permissions.includes("roles-permissions_edit"))
          tr(data-name="roles-permissions_delete")
            td X√≥a
            each item in records
              td.text-center 
                input(
                  type="checkbox",
                  checked=item.permissions.includes("roles-permissions_delete"))

          // üë§ T√†i kho·∫£n
          tr
            td(colspan="4") 
              b T√†i kho·∫£n
          tr(data-name="account_view")
            td Xem
            each item in records   
              td.text-center 
                input(
                  type="checkbox",
                  checked=item.permissions.includes("account_view"))
          tr(data-name="account_create")
            td Th√™m m·ªõi
            each item in records  
              td.text-center 
                input(
                  type="checkbox",
                  checked=item.permissions.includes("account_create"))
          tr(data-name="account_edit")
            td Ch·ªânh s·ª≠a
            each item in records
              td.text-center 
                input(
                  type="checkbox",
                  checked=item.permissions.includes("account_edit"))
          tr(data-name="account_delete")
            td X√≥a
            each item in records
              td.text-center 
                input(
                  type="checkbox",
                  checked=item.permissions.includes("account_delete"))

    script(src="/admin/js/role.js")
