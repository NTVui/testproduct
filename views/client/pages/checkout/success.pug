extends ../../layouts/default.pug
include ../../mixins/box-head.pug

block main
    .container.my-5
        .row.justify-content-center
            .col-md-8
                .card
                    .card-header.bg-success.text-white.text-center
                        h2 ƒê·∫∑t h√†ng th√†nh c√¥ng!
                        div(class="alert alert-success") ƒê∆°n h√†ng s·∫Ω s·ªõm ƒë∆∞·ª£c giao cho b·∫°n. H√£y ki√™n nh·∫´n ch·ªù nha!

                    
                    .card-body
                        //- DEBUG: Hi·ªÉn th·ªã to√†n b·ªô order object
                        //- .alert.alert-info
                        //-     h5 DEBUG INFO:
                        //-     pre= JSON.stringify(order, null, 2)
                        
                        //- Th√¥ng tin kh√°ch h√†ng  
                        .mb-4
                            h4 üòé Th√¥ng tin kh√°ch h√†ng
                            .card.bg-light
                                .card-body
                                    if order && order.userInfo
                                        p <strong>H·ªç t√™n:</strong> #{order.userInfo.fullname || 'Kh√¥ng c√≥'}
                                        p <strong>S·ªë ƒëi·ªán tho·∫°i:</strong> #{order.userInfo.phone || 'Kh√¥ng c√≥'}
                                        p <strong>ƒê·ªãa ch·ªâ:</strong> #{order.userInfo.address || 'Kh√¥ng c√≥'}
                                    else
                                        p.text-danger Kh√¥ng c√≥ th√¥ng tin kh√°ch h√†ng
                        
                        //- Th√¥ng tin ƒë∆°n h√†ng
                        .mb-4
                            h4 üõçÔ∏è Th√¥ng tin ƒë∆°n h√†ng
                            p <strong>M√£ ƒë∆°n h√†ng:</strong> #{order.cart_id}
                            p <strong>Ng√†y ƒë·∫∑t:</strong> #{order.createdAt}
                        
                        //- Danh s√°ch s·∫£n ph·∫©m
                        .mb-4
                            h4 üì¶ S·∫£n ph·∫©m ƒë√£ ƒë·∫∑t
                            if order.products && order.products.length > 0
                                .table-responsive
                                    table.table.table-striped
                                        thead.table-dark
                                            tr
                                                th STT
                                                th H√¨nh ·∫£nh
                                                th T√™n s·∫£n ph·∫©m
                                                th Gi√°
                                                th S·ªë l∆∞·ª£ng
                                                th Th√†nh ti·ªÅn
                                        tbody
                                            each product, index in order.products
                                                tr
                                                    td #{index + 1}
                                                    td
                                                        if product.productInfo && product.productInfo.thumbnail
                                                            img(src=product.productInfo.thumbnail, alt=product.productInfo.title, width="50")
                                                        else
                                                            span Kh√¥ng c√≥ ·∫£nh
                                                    td
                                                        if product.productInfo
                                                            = product.productInfo.title
                                                        else
                                                            | Kh√¥ng c√≥ t√™n
                                                    td
                                                        if product.priceNew
                                                            = product.priceNew.toLocaleString('vi-VN')
                                                        else
                                                            = product.price.toLocaleString('vi-VN')
                                                        |  VNƒê
                                                    td= product.quantity
                                                    td
                                                        if product.totalPrice
                                                            strong= product.totalPrice.toLocaleString('vi-VN')
                                                        else
                                                            strong 0
                                                        |  VNƒê
                                        tfoot
                                            tr.table-success
                                                td(colspan="4") <strong>T·ªïng c·ªông:</strong>
                                                td
                                                    strong.text-success= order.totalPrice ? order.totalPrice.toLocaleString('vi-VN') : '0'
                                                    |  VNƒê
                            else
                                .alert.alert-warning Kh√¥ng c√≥ s·∫£n ph·∫©m n√†o
                        
                        //- Buttons
                        .text-center
                            a.btn.btn-primary.me-2(href="/") Tr·ªü l·∫°i
                            
                            //- a.btn.btn-outline-secondary(href="/user/orders") Xem ƒë∆°n h√†ng c·ªßa t√¥i
        